{{ define "main" }}
{{ partial "profile.html" . }}

<div id="list-page">
  {{ $pages := .Site.RegularPages }}
  {{ $paginator := .Paginate ($pages) }}
  {{ range $paginator.Pages }}
  <section class="item">

    <!-- Title below the image -->
    <div class="title">
      <h1>{{ .Title }}</h1> <!-- Title without link -->
    </div>
    
    <!-- Image content -->
    <div class="content content-center">
      {{ with .Params.image }}
      <img src="{{ . }}" alt="{{ $.Title }}" />
      {{ end }}
    </div>



    <!-- Summary below the title -->
    <div class="summary-text">
      {{ .Content | truncate 800 }}

    </div>

    <!-- Conditional Read More link -->

    {{ if .Truncated }}
    <div class="read-more">
      <a href="{{ .RelPermalink }}">Read More</a>
    </div>
    {{ end }}
    
    <!-- Tags and date -->
    <div class="tags-date-container">
      {{ with .Params.tags }}
      <div class="tags">
          {{ range . }}
              <a href="{{ "tags/" | absURL }}{{ . | urlize }}" class="tag {{ . | urlize }}">{{ . }}</a>
          {{ end }}
      </div>
      {{ end }}

      <div class="date">
        <a href="{{ .RelPermalink }}"><time datetime="{{ .PublishDate }}">{{ .PublishDate.Format "Jan 2, 2006" }}</time></a>
      </div>
    </div>
  </section>

  <!-- Divider between posts -->
  <hr class="post-divider" />

  {{ end }}

  {{ if or ($paginator.HasPrev) ($paginator.HasNext) }}
  <div class="pagination">
    {{ if $paginator.HasPrev }}
    <span class="prev">
      <a href="{{.Paginator.Prev.URL}}">
        <span class="arrow">←</span> {{ with .Site.Params.newerPosts }}{{ . }}{{ else }}{{ i18n "postsNewer" }}{{ end }}
      </a>
    </span>
    {{ end }}
    
    {{ if $paginator.HasNext }}
    <span class="next">
      <a href="{{.Paginator.Next.URL}}">
        {{ with .Site.Params.olderPosts }}{{ . }}{{ else }}{{ i18n "postsOlder" }}{{ end }} <span class="arrow">→</span>
      </a>
    </span>
    {{ end }}
  </div>
  {{ end }}
</div>

{{ end }}
